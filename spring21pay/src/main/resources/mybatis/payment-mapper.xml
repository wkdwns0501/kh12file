<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="payment">
	
	<!-- 결제 대표정보 등록 -->
	<select id="sequence" resultType="int">
		select payment_seq.nextval from dual
	</select>	
	
	<insert id="save">
		insert into payment(
			payment_no, payment_member, payment_tid,
			 payment_name, payment_price, payment_remain
		)
		values(
			#{paymentNo}, #{paymentMember}, #{paymentTid},
			 #{paymentName}, #{paymentPrice}, #{paymentRemain}
		)
	</insert>
	
		<!-- 결제 상세정보 등록 -->
		<insert id="saveDetail">
			insert into payment_detail (
				payment_detail_no, payment_detail_origin, payment_detail_product,
				payment_detail_product_name, payment_detail_product_price,
				payment_detail_product_qty, payment_detail_status
			)
			values(
				payment_detail_seq.nextval, 
				#{paymentDetailOrigin}, #{paymentDetailProduct}, #{paymentDetailProductName},
				#{paymentDetailProductPrice}, #{paymentDetailProductQty},
				'완료'
			) 
		</insert>
	
	<select id="list" resultType="PaymentDto">
		select * from payment order by payment_no asc
	</select>
	
	<select id="find" resultType="PaymentDto">
		select * from payment where payment_no = #{paymentNo}
	</select>
	
</mapper>